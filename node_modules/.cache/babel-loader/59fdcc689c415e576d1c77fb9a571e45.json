{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AccessLists = void 0;\n\nvar ethereumjs_util_1 = require(\"ethereumjs-util\");\n\nvar types_1 = require(\"./types\");\n\nvar AccessLists =\n/** @class */\nfunction () {\n  function AccessLists() {}\n\n  AccessLists.getAccessListData = function (accessList) {\n    var AccessListJSON;\n    var bufferAccessList;\n\n    if (accessList && (0, types_1.isAccessList)(accessList)) {\n      AccessListJSON = accessList;\n      var newAccessList = [];\n\n      for (var i = 0; i < accessList.length; i++) {\n        var item = accessList[i];\n        var addressBuffer = (0, ethereumjs_util_1.toBuffer)(item.address);\n        var storageItems = [];\n\n        for (var index = 0; index < item.storageKeys.length; index++) {\n          storageItems.push((0, ethereumjs_util_1.toBuffer)(item.storageKeys[index]));\n        }\n\n        newAccessList.push([addressBuffer, storageItems]);\n      }\n\n      bufferAccessList = newAccessList;\n    } else {\n      bufferAccessList = accessList !== null && accessList !== void 0 ? accessList : []; // build the JSON\n\n      var json = [];\n\n      for (var i = 0; i < bufferAccessList.length; i++) {\n        var data = bufferAccessList[i];\n        var address = (0, ethereumjs_util_1.bufferToHex)(data[0]);\n        var storageKeys = [];\n\n        for (var item = 0; item < data[1].length; item++) {\n          storageKeys.push((0, ethereumjs_util_1.bufferToHex)(data[1][item]));\n        }\n\n        var jsonItem = {\n          address: address,\n          storageKeys: storageKeys\n        };\n        json.push(jsonItem);\n      }\n\n      AccessListJSON = json;\n    }\n\n    return {\n      AccessListJSON: AccessListJSON,\n      accessList: bufferAccessList\n    };\n  };\n\n  AccessLists.verifyAccessList = function (accessList) {\n    for (var key = 0; key < accessList.length; key++) {\n      var accessListItem = accessList[key];\n      var address = accessListItem[0];\n      var storageSlots = accessListItem[1];\n\n      if (accessListItem[2] !== undefined) {\n        throw new Error('Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.');\n      }\n\n      if (address.length != 20) {\n        throw new Error('Invalid EIP-2930 transaction: address length should be 20 bytes');\n      }\n\n      for (var storageSlot = 0; storageSlot < storageSlots.length; storageSlot++) {\n        if (storageSlots[storageSlot].length != 32) {\n          throw new Error('Invalid EIP-2930 transaction: storage slot length should be 32 bytes');\n        }\n      }\n    }\n  };\n\n  AccessLists.getAccessListJSON = function (accessList) {\n    var accessListJSON = [];\n\n    for (var index = 0; index < accessList.length; index++) {\n      var item = accessList[index];\n      var JSONItem = {\n        address: '0x' + (0, ethereumjs_util_1.setLengthLeft)(item[0], 20).toString('hex'),\n        storageKeys: []\n      };\n      var storageSlots = item[1];\n\n      for (var slot = 0; slot < storageSlots.length; slot++) {\n        var storageSlot = storageSlots[slot];\n        JSONItem.storageKeys.push('0x' + (0, ethereumjs_util_1.setLengthLeft)(storageSlot, 32).toString('hex'));\n      }\n\n      accessListJSON.push(JSONItem);\n    }\n\n    return accessListJSON;\n  };\n\n  AccessLists.getDataFeeEIP2930 = function (accessList, common) {\n    var accessListStorageKeyCost = common.param('gasPrices', 'accessListStorageKeyCost');\n    var accessListAddressCost = common.param('gasPrices', 'accessListAddressCost');\n    var slots = 0;\n\n    for (var index = 0; index < accessList.length; index++) {\n      var item = accessList[index];\n      var storageSlots = item[1];\n      slots += storageSlots.length;\n    }\n\n    var addresses = accessList.length;\n    return addresses * accessListAddressCost + slots * accessListStorageKeyCost;\n  };\n\n  return AccessLists;\n}();\n\nexports.AccessLists = AccessLists;","map":{"version":3,"mappings":"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","names":["AccessLists","accessList","AccessListJSON","bufferAccessList","newAccessList","i","length","item","addressBuffer","address","storageItems","index","storageKeys","push","json","data","jsonItem","key","accessListItem","storageSlots","undefined","Error","storageSlot","accessListJSON","JSONItem","toString","slot","common","accessListStorageKeyCost","param","accessListAddressCost","slots","addresses","exports"],"sources":["/home/vukasin/Desktop/LuckySixFront/node_modules/@ethereumjs/tx/src/util.ts"],"sourcesContent":["import Common from '@ethereumjs/common'\nimport { bufferToHex, setLengthLeft, toBuffer } from 'ethereumjs-util'\nimport { AccessList, AccessListBuffer, AccessListItem, isAccessList } from './types'\n\nexport class AccessLists {\n  public static getAccessListData(accessList: AccessListBuffer | AccessList) {\n    let AccessListJSON\n    let bufferAccessList\n    if (accessList && isAccessList(accessList)) {\n      AccessListJSON = accessList\n      const newAccessList: AccessListBuffer = []\n\n      for (let i = 0; i < accessList.length; i++) {\n        const item: AccessListItem = accessList[i]\n        const addressBuffer = toBuffer(item.address)\n        const storageItems: Buffer[] = []\n        for (let index = 0; index < item.storageKeys.length; index++) {\n          storageItems.push(toBuffer(item.storageKeys[index]))\n        }\n        newAccessList.push([addressBuffer, storageItems])\n      }\n      bufferAccessList = newAccessList\n    } else {\n      bufferAccessList = accessList ?? []\n      // build the JSON\n      const json: AccessList = []\n      for (let i = 0; i < bufferAccessList.length; i++) {\n        const data = bufferAccessList[i]\n        const address = bufferToHex(data[0])\n        const storageKeys: string[] = []\n        for (let item = 0; item < data[1].length; item++) {\n          storageKeys.push(bufferToHex(data[1][item]))\n        }\n        const jsonItem: AccessListItem = {\n          address,\n          storageKeys,\n        }\n        json.push(jsonItem)\n      }\n      AccessListJSON = json\n    }\n\n    return {\n      AccessListJSON,\n      accessList: bufferAccessList,\n    }\n  }\n\n  public static verifyAccessList(accessList: AccessListBuffer) {\n    for (let key = 0; key < accessList.length; key++) {\n      const accessListItem = accessList[key]\n      const address = <Buffer>accessListItem[0]\n      const storageSlots = <Buffer[]>accessListItem[1]\n      if ((<any>accessListItem)[2] !== undefined) {\n        throw new Error(\n          'Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.'\n        )\n      }\n      if (address.length != 20) {\n        throw new Error('Invalid EIP-2930 transaction: address length should be 20 bytes')\n      }\n      for (let storageSlot = 0; storageSlot < storageSlots.length; storageSlot++) {\n        if (storageSlots[storageSlot].length != 32) {\n          throw new Error('Invalid EIP-2930 transaction: storage slot length should be 32 bytes')\n        }\n      }\n    }\n  }\n\n  public static getAccessListJSON(accessList: AccessListBuffer) {\n    const accessListJSON = []\n    for (let index = 0; index < accessList.length; index++) {\n      const item: any = accessList[index]\n      const JSONItem: any = {\n        address: '0x' + setLengthLeft(<Buffer>item[0], 20).toString('hex'),\n        storageKeys: [],\n      }\n      const storageSlots: Buffer[] = item[1]\n      for (let slot = 0; slot < storageSlots.length; slot++) {\n        const storageSlot = storageSlots[slot]\n        JSONItem.storageKeys.push('0x' + setLengthLeft(storageSlot, 32).toString('hex'))\n      }\n      accessListJSON.push(JSONItem)\n    }\n    return accessListJSON\n  }\n\n  public static getDataFeeEIP2930(accessList: AccessListBuffer, common: Common): number {\n    const accessListStorageKeyCost = common.param('gasPrices', 'accessListStorageKeyCost')\n    const accessListAddressCost = common.param('gasPrices', 'accessListAddressCost')\n\n    let slots = 0\n    for (let index = 0; index < accessList.length; index++) {\n      const item = accessList[index]\n      const storageSlots = item[1]\n      slots += storageSlots.length\n    }\n\n    const addresses = accessList.length\n    return addresses * accessListAddressCost + slots * accessListStorageKeyCost\n  }\n}\n"]},"metadata":{},"sourceType":"script"}