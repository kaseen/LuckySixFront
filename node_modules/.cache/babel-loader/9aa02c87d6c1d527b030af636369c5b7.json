{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ethereumjs_util_1 = require(\"ethereumjs-util\");\n\nvar _1 = require(\".\");\n\nvar TransactionFactory =\n/** @class */\nfunction () {\n  // It is not possible to instantiate a TransactionFactory object.\n  function TransactionFactory() {}\n  /**\n   * Create a transaction from a `txData` object\n   *\n   * @param txData - The transaction data. The `type` field will determine which transaction type is returned (if undefined, creates a legacy transaction)\n   * @param txOptions - Options to pass on to the constructor of the transaction\n   */\n\n\n  TransactionFactory.fromTxData = function (txData, txOptions) {\n    if (txOptions === void 0) {\n      txOptions = {};\n    }\n\n    if (!('type' in txData) || txData.type === undefined) {\n      // Assume legacy transaction\n      return _1.Transaction.fromTxData(txData, txOptions);\n    } else {\n      var txType = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(txData.type)).toNumber();\n\n      if (txType === 0) {\n        return _1.Transaction.fromTxData(txData, txOptions);\n      } else if (txType === 1) {\n        return _1.AccessListEIP2930Transaction.fromTxData(txData, txOptions);\n      } else if (txType === 2) {\n        return _1.FeeMarketEIP1559Transaction.fromTxData(txData, txOptions);\n      } else {\n        throw new Error(\"Tx instantiation with type \".concat(txType, \" not supported\"));\n      }\n    }\n  };\n  /**\n   * This method tries to decode serialized data.\n   *\n   * @param data - The data Buffer\n   * @param txOptions - The transaction options\n   */\n\n\n  TransactionFactory.fromSerializedData = function (data, txOptions) {\n    if (txOptions === void 0) {\n      txOptions = {};\n    }\n\n    if (data[0] <= 0x7f) {\n      // Determine the type.\n      var EIP = void 0;\n\n      switch (data[0]) {\n        case 1:\n          EIP = 2930;\n          break;\n\n        case 2:\n          EIP = 1559;\n          break;\n\n        default:\n          throw new Error(\"TypedTransaction with ID \".concat(data[0], \" unknown\"));\n      }\n\n      if (EIP === 1559) {\n        return _1.FeeMarketEIP1559Transaction.fromSerializedTx(data, txOptions);\n      } else {\n        // EIP === 2930\n        return _1.AccessListEIP2930Transaction.fromSerializedTx(data, txOptions);\n      }\n    } else {\n      return _1.Transaction.fromSerializedTx(data, txOptions);\n    }\n  };\n  /**\n   * When decoding a BlockBody, in the transactions field, a field is either:\n   * A Buffer (a TypedTransaction - encoded as TransactionType || rlp(TransactionPayload))\n   * A Buffer[] (Legacy Transaction)\n   * This method returns the right transaction.\n   *\n   * @param data - A Buffer or Buffer[]\n   * @param txOptions - The transaction options\n   */\n\n\n  TransactionFactory.fromBlockBodyData = function (data, txOptions) {\n    if (txOptions === void 0) {\n      txOptions = {};\n    }\n\n    if (Buffer.isBuffer(data)) {\n      return this.fromSerializedData(data, txOptions);\n    } else if (Array.isArray(data)) {\n      // It is a legacy transaction\n      return _1.Transaction.fromValuesArray(data, txOptions);\n    } else {\n      throw new Error('Cannot decode transaction: unknown type input');\n    }\n  };\n  /**\n   * This helper method allows one to retrieve the class which matches the transactionID\n   * If transactionID is undefined, returns the legacy transaction class.\n   * @deprecated - This method is deprecated and will be removed on the next major release\n   * @param transactionID\n   * @param _common - This option is not used\n   */\n\n\n  TransactionFactory.getTransactionClass = function (transactionID, _common) {\n    if (transactionID === void 0) {\n      transactionID = 0;\n    }\n\n    var legacyTxn = transactionID == 0 || transactionID >= 0x80 && transactionID <= 0xff;\n\n    if (legacyTxn) {\n      return _1.Transaction;\n    }\n\n    switch (transactionID) {\n      case 1:\n        return _1.AccessListEIP2930Transaction;\n\n      case 2:\n        return _1.FeeMarketEIP1559Transaction;\n\n      default:\n        throw new Error(\"TypedTransaction with ID \".concat(transactionID, \" unknown\"));\n    }\n  };\n\n  return TransactionFactory;\n}();\n\nexports.default = TransactionFactory;","map":{"version":3,"mappings":"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","names":["TransactionFactory","txData","txOptions","type","undefined","_1","fromTxData","txType","ethereumjs_util_1","toNumber","Error","data","EIP","fromSerializedTx","Buffer","isBuffer","fromSerializedData","Array","isArray","fromValuesArray","transactionID","_common","legacyTxn"],"sources":["/home/vukasin/Desktop/LuckySixFront/node_modules/@ethereumjs/tx/src/transactionFactory.ts"],"sourcesContent":["import { BN, toBuffer } from 'ethereumjs-util'\nimport {\n  TxOptions,\n  TypedTransaction,\n  TxData,\n  AccessListEIP2930TxData,\n  FeeMarketEIP1559TxData,\n} from './types'\nimport { Transaction, AccessListEIP2930Transaction, FeeMarketEIP1559Transaction } from '.'\nimport Common from '@ethereumjs/common'\n\nexport default class TransactionFactory {\n  // It is not possible to instantiate a TransactionFactory object.\n  private constructor() {}\n\n  /**\n   * Create a transaction from a `txData` object\n   *\n   * @param txData - The transaction data. The `type` field will determine which transaction type is returned (if undefined, creates a legacy transaction)\n   * @param txOptions - Options to pass on to the constructor of the transaction\n   */\n  public static fromTxData(\n    txData: TxData | AccessListEIP2930TxData | FeeMarketEIP1559TxData,\n    txOptions: TxOptions = {}\n  ): TypedTransaction {\n    if (!('type' in txData) || txData.type === undefined) {\n      // Assume legacy transaction\n      return Transaction.fromTxData(<TxData>txData, txOptions)\n    } else {\n      const txType = new BN(toBuffer(txData.type)).toNumber()\n      if (txType === 0) {\n        return Transaction.fromTxData(<TxData>txData, txOptions)\n      } else if (txType === 1) {\n        return AccessListEIP2930Transaction.fromTxData(<AccessListEIP2930TxData>txData, txOptions)\n      } else if (txType === 2) {\n        return FeeMarketEIP1559Transaction.fromTxData(<FeeMarketEIP1559TxData>txData, txOptions)\n      } else {\n        throw new Error(`Tx instantiation with type ${txType} not supported`)\n      }\n    }\n  }\n\n  /**\n   * This method tries to decode serialized data.\n   *\n   * @param data - The data Buffer\n   * @param txOptions - The transaction options\n   */\n  public static fromSerializedData(data: Buffer, txOptions: TxOptions = {}): TypedTransaction {\n    if (data[0] <= 0x7f) {\n      // Determine the type.\n      let EIP: number\n      switch (data[0]) {\n        case 1:\n          EIP = 2930\n          break\n        case 2:\n          EIP = 1559\n          break\n        default:\n          throw new Error(`TypedTransaction with ID ${data[0]} unknown`)\n      }\n      if (EIP === 1559) {\n        return FeeMarketEIP1559Transaction.fromSerializedTx(data, txOptions)\n      } else {\n        // EIP === 2930\n        return AccessListEIP2930Transaction.fromSerializedTx(data, txOptions)\n      }\n    } else {\n      return Transaction.fromSerializedTx(data, txOptions)\n    }\n  }\n\n  /**\n   * When decoding a BlockBody, in the transactions field, a field is either:\n   * A Buffer (a TypedTransaction - encoded as TransactionType || rlp(TransactionPayload))\n   * A Buffer[] (Legacy Transaction)\n   * This method returns the right transaction.\n   *\n   * @param data - A Buffer or Buffer[]\n   * @param txOptions - The transaction options\n   */\n  public static fromBlockBodyData(data: Buffer | Buffer[], txOptions: TxOptions = {}) {\n    if (Buffer.isBuffer(data)) {\n      return this.fromSerializedData(data, txOptions)\n    } else if (Array.isArray(data)) {\n      // It is a legacy transaction\n      return Transaction.fromValuesArray(data, txOptions)\n    } else {\n      throw new Error('Cannot decode transaction: unknown type input')\n    }\n  }\n\n  /**\n   * This helper method allows one to retrieve the class which matches the transactionID\n   * If transactionID is undefined, returns the legacy transaction class.\n   * @deprecated - This method is deprecated and will be removed on the next major release\n   * @param transactionID\n   * @param _common - This option is not used\n   */\n  public static getTransactionClass(transactionID: number = 0, _common?: Common) {\n    const legacyTxn = transactionID == 0 || (transactionID >= 0x80 && transactionID <= 0xff)\n\n    if (legacyTxn) {\n      return Transaction\n    }\n\n    switch (transactionID) {\n      case 1:\n        return AccessListEIP2930Transaction\n      case 2:\n        return FeeMarketEIP1559Transaction\n      default:\n        throw new Error(`TypedTransaction with ID ${transactionID} unknown`)\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"script"}